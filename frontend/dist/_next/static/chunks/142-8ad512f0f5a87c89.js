"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{14126:function(e,t,s){s.d(t,{Z:function(){return f}});var a=s(37821),n=s(58078),r=s(87769),i=s(67469),l=s(42347),o=s(96937),c=s(91027),d=s(27002),m=s(42942),u=s(3116),x=s(97720),h=s(74129);function f(){let[e,t]=(0,n.useState)({coins:[],total:0,sortBy:"correlation",limit:20}),[s,f]=(0,n.useState)(!0),[p,g]=(0,n.useState)("correlation"),[v,j]=(0,n.useState)(20),[N,b]=(0,n.useState)("overview"),[w,y]=(0,n.useState)("--"),[k,C]=(0,n.useState)(!1),[_,S]=(0,n.useState)(""),[D,T]=(0,n.useState)("all"),[L,M]=(0,n.useState)("all"),[A,V]=(0,n.useState)("all");(0,n.useEffect)(()=>{C(!0)},[]);let z=(0,n.useCallback)(async()=>{try{f(!0);let e=await fetch("/api/dashboard/trending-coins?sortBy=".concat(p,"&limit=").concat(v));if(e.ok){let s=await e.json();t(s),y(new Date().toLocaleTimeString())}}catch(e){console.error("Error fetching trending coins:",e)}finally{f(!1)}},[p,v]);(0,n.useEffect)(()=>{if(k&&(z(),h.gy)){let e=h.gy.subscribe("trending_update",e=>{z(),y(new Date().toLocaleTimeString())});return()=>{e()}}},[k,p,v,z]);let R=e=>e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(2),"K"):"$".concat(e.toFixed(2)),Z=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString(),E=e=>"".concat((100*e).toFixed(1),"%"),F=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":e>=.4?"text-orange-600":"text-red-600",P=e=>e>=.8?"default":e>=.6?"secondary":e>=.4?"outline":"destructive",Q=(0,n.useMemo)(()=>{let t=[...e.coins];if(t=t.filter(e=>{let t=(e.trading_volume_24h||0)>0,s=(e.tiktok_views_24h||0)>0,a=(e.correlation_score||0)>0,n=(e.market_cap||0)>0,r=(e.total_mentions||0)>0;return t||s||a||n||r}),_.trim()){let e=_.toLowerCase().trim();t=t.filter(t=>{var s,a,n;return(null===(s=t.symbol)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(n=t.address)||void 0===n?void 0:n.toLowerCase().includes(e))})}if("all"!==D)switch(D){case"high":t=t.filter(e=>(e.market_cap||0)>=1e6);break;case"medium":t=t.filter(e=>(e.market_cap||0)>=1e5&&1e6>(e.market_cap||0));break;case"low":t=t.filter(e=>1e5>(e.market_cap||0))}if("all"!==L)switch(L){case"high":t=t.filter(e=>(e.correlation_score||0)>=.8);break;case"medium":t=t.filter(e=>(e.correlation_score||0)>=.6&&.8>(e.correlation_score||0));break;case"low":t=t.filter(e=>.6>(e.correlation_score||0))}if("all"!==A)switch(A){case"high":t=t.filter(e=>(e.tiktok_views_24h||0)>=1e4);break;case"medium":t=t.filter(e=>(e.tiktok_views_24h||0)>=1e3&&1e4>(e.tiktok_views_24h||0));break;case"low":t=t.filter(e=>1e3>(e.tiktok_views_24h||0))}return t},[e.coins,_,D,L,A]),Y=()=>{S(""),T("all"),M("all"),V("all")},I=e=>e>=1e9?"".concat((e/1e9).toFixed(2),"B"):e>=1e6?"".concat((e/1e9).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e.toString();return s||!k?(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Trending Coins Analytics"}),(0,a.jsx)(r.SZ,{children:"Loading trending coins data..."})]}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-muted rounded animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsx)("div",{className:"h-4 bg-muted rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-3 bg-muted rounded animate-pulse w-3/4"})]})]},e))})})]}):s||0!==e.coins.length?(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.ll,{children:"Trending Coins Analytics"}),(0,a.jsx)(r.SZ,{children:"Real-time analysis of trending memecoins with live updates"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(c.Ph,{value:p,onValueChange:g,children:[(0,a.jsx)(c.i4,{className:"w-40",children:(0,a.jsx)(c.ki,{})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"correlation",children:"Correlation"}),(0,a.jsx)(c.Ql,{value:"volume",children:"Volume"}),(0,a.jsx)(c.Ql,{value:"views",children:"Views"}),(0,a.jsx)(c.Ql,{value:"mentions",children:"Mentions"}),(0,a.jsx)(c.Ql,{value:"market_cap",children:"Market Cap"})]})]}),(0,a.jsxs)(c.Ph,{value:v.toString(),onValueChange:e=>j(parseInt(e)),children:[(0,a.jsx)(c.i4,{className:"w-24",children:(0,a.jsx)(c.ki,{})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"10",children:"10"}),(0,a.jsx)(c.Ql,{value:"20",children:"20"}),(0,a.jsx)(c.Ql,{value:"50",children:"50"}),(0,a.jsx)(c.Ql,{value:"100",children:"100"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Showing ",Q.length," of ",e.total," coins"]}),(0,a.jsxs)("span",{children:["Last updated: ",w]})]})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,a.jsx)(d.I,{placeholder:"Search by symbol, name, or address...",value:_,onChange:e=>S(e.target.value),className:"pl-10 pr-10"}),_&&(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>S(""),children:(0,a.jsx)(u.Z,{className:"w-3 h-3"})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Filters:"})]}),(0,a.jsxs)(c.Ph,{value:D,onValueChange:T,children:[(0,a.jsx)(c.i4,{className:"w-32",children:(0,a.jsx)(c.ki,{placeholder:"Market Cap"})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"all",children:"All Market Caps"}),(0,a.jsx)(c.Ql,{value:"high",children:"High (≥$1M)"}),(0,a.jsx)(c.Ql,{value:"medium",children:"Medium ($100K-$1M)"}),(0,a.jsx)(c.Ql,{value:"low",children:"Low (<$100K)"})]})]}),(0,a.jsxs)(c.Ph,{value:L,onValueChange:M,children:[(0,a.jsx)(c.i4,{className:"w-32",children:(0,a.jsx)(c.ki,{placeholder:"Correlation"})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"all",children:"All Correlations"}),(0,a.jsx)(c.Ql,{value:"high",children:"High (≥80%)"}),(0,a.jsx)(c.Ql,{value:"medium",children:"Medium (60-80%)"}),(0,a.jsx)(c.Ql,{value:"low",children:"Low (<60%)"})]})]}),(0,a.jsxs)(c.Ph,{value:A,onValueChange:V,children:[(0,a.jsx)(c.i4,{className:"w-32",children:(0,a.jsx)(c.ki,{placeholder:"Views"})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"all",children:"All Views"}),(0,a.jsx)(c.Ql,{value:"high",children:"High (≥10K)"}),(0,a.jsx)(c.Ql,{value:"medium",children:"Medium (1K-10K)"}),(0,a.jsx)(c.Ql,{value:"low",children:"Low (<1K)"})]})]}),(_||"all"!==D||"all"!==L||"all"!==A)&&(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:Y,className:"text-muted-foreground hover:text-foreground",children:"Clear All Filters"})]}),(_||"all"!==D||"all"!==L||"all"!==A)&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),_&&(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:['Search: "',_,'"',(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"ml-1 h-4 w-4 p-0 hover:bg-transparent",onClick:()=>S(""),children:(0,a.jsx)(u.Z,{className:"w-2 h-2"})})]}),"all"!==D&&(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:["Market Cap: ",D,(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"ml-1 h-4 w-4 p-0 hover:bg-transparent",onClick:()=>T("all"),children:(0,a.jsx)(u.Z,{className:"w-2 h-2"})})]}),"all"!==L&&(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:["Correlation: ",L,(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"ml-1 h-4 w-4 p-0 hover:bg-transparent",onClick:()=>M("all"),children:(0,a.jsx)(u.Z,{className:"w-2 h-2"})})]}),"all"!==A&&(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:["Views: ",A,(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"ml-1 h-4 w-4 p-0 hover:bg-transparent",onClick:()=>V("all"),children:(0,a.jsx)(u.Z,{className:"w-2 h-2"})})]})]})]}),(0,a.jsxs)(o.mQ,{value:N,onValueChange:b,className:"w-full",children:[(0,a.jsxs)(o.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(o.SP,{value:"overview",children:"Overview"}),(0,a.jsx)(o.SP,{value:"correlation",children:"Correlation"}),(0,a.jsx)(o.SP,{value:"social",children:"Social"}),(0,a.jsx)(o.SP,{value:"market",children:"Market Data"})]}),0===Q.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-muted-foreground mb-2",children:_?'No coins found matching "'.concat(_,'"'):"No coins match the current filters"}),(0,a.jsx)(i.z,{variant:"outline",onClick:Y,children:"Clear All Filters"})]}),(0,a.jsx)(o.nU,{value:"overview",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid gap-4",children:Q.slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center text-sm font-bold",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.symbol}),(e.trading_volume_24h||0)>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Volume: ",R(e.trading_volume_24h)]}),e.market_cap&&e.market_cap>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Market Cap: ",R(e.market_cap)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(e.correlation_score||0)>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Correlation"}),(0,a.jsx)("p",{className:"text-lg font-bold ".concat(F(e.correlation_score)),children:E(e.correlation_score)})]}),(e.tiktok_views_24h||0)>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Views"}),(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:Z(e.tiktok_views_24h)})]})]})]},e.symbol))})}),(0,a.jsx)(o.nU,{value:"correlation",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid gap-4",children:Q.sort((e,t)=>t.correlation_score-e.correlation_score).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center text-sm font-bold",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.symbol}),(e.trading_volume_24h||0)>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Volume: ",R(e.trading_volume_24h)]}),e.market_cap&&e.market_cap>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Market Cap: ",R(e.market_cap)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(e.correlation_score||0)>0&&(0,a.jsx)(l.C,{variant:P(e.correlation_score),children:E(e.correlation_score)}),(e.tiktok_views_24h||0)>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Views"}),(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:Z(e.tiktok_views_24h)})]})]})]},e.symbol))})}),(0,a.jsx)(o.nU,{value:"social",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid gap-4",children:Q.sort((e,t)=>t.tiktok_views_24h-e.tiktok_views_24h).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center text-sm font-bold",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.symbol}),(e.correlation_score||0)>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Correlation: ",E(e.correlation_score)]}),e.market_cap&&e.market_cap>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Market Cap: ",R(e.market_cap)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(e.tiktok_views_24h||0)>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Views"}),(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:Z(e.tiktok_views_24h)})]}),(e.total_mentions||0)>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Mentions"}),(0,a.jsx)("p",{className:"text-lg font-bold text-purple-600",children:e.total_mentions})]})]})]},e.symbol))})}),(0,a.jsx)(o.nU,{value:"market",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid gap-4",children:Q.filter(e=>e.market_cap||e.total_supply).sort((e,t)=>(t.market_cap||0)-(e.market_cap||0)).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center text-sm font-bold",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.symbol}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.name||"Unknown Token"}),e.address&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-8)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[e.market_cap&&e.market_cap>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Market Cap"}),(0,a.jsx)("p",{className:"text-lg font-bold text-purple-600",children:R(e.market_cap)})]}),e.total_supply&&e.total_supply>0&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Total Supply"}),(0,a.jsx)("p",{className:"text-lg font-bold text-orange-600",children:I(e.total_supply)})]}),e.last_updated&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.last_updated).toLocaleDateString()})]})]})]},e.symbol))})})]})]})]}):(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsx)(r.ll,{children:"Trending Coins Analytics"}),(0,a.jsx)(r.SZ,{children:"No trending coins data available"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-muted/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC8"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Trending Coins Found"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:"No trending coins data is currently available. This could be because:"}),(0,a.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1 text-left max-w-md mx-auto mb-6",children:[(0,a.jsx)("li",{children:"• The database is not populated with token data"}),(0,a.jsx)("li",{children:"• Price data collection is not running"}),(0,a.jsx)("li",{children:"• TikTok scraper is not collecting data"}),(0,a.jsx)("li",{children:"• No recent activity in the last 24 hours"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"To start seeing trending coins data:"}),(0,a.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,a.jsx)("li",{children:"• Run the Bitquery data collection service"}),(0,a.jsx)("li",{children:"• Start the TikTok scraper"}),(0,a.jsx)("li",{children:"• Ensure database tables are populated"}),(0,a.jsx)("li",{children:"• Check that all services are running"})]})]})]})})]})}},86985:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(37821),n=s(58078),r=s(87769),i=s(42347),l=s(74129);class o{setupReconnection(){document.addEventListener("visibilitychange",()=>{document.hidden||this.isConnected||this.isConnecting||this.connect()}),window.addEventListener("focus",()=>{this.isConnected||this.isConnecting||this.connect()})}connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24h";if(!this.isConnecting&&!this.isConnected){this.isConnecting=!0,console.log("\uD83D\uDD0C Connecting to TikTok views real-time stream...");try{this.disconnect(),this.eventSource=new EventSource("/api/dashboard/total-tiktok-views?timeRange=".concat(e,"&realtime=true")),this.eventSource.onopen=()=>{console.log("✅ TikTok views real-time stream connected"),this.isConnected=!0,this.isConnecting=!1,this.reconnectAttempts=0},this.eventSource.onmessage=e=>{try{let t=JSON.parse(e.data);if("keepalive"===t.type)return;console.log("\uD83D\uDD04 TikTok views updated:",t),this.callbacks.forEach(e=>{try{e(t)}catch(e){console.error("❌ Error in TikTok views callback:",e)}})}catch(e){console.error("❌ Error parsing TikTok views data:",e)}},this.eventSource.onerror=e=>{console.error("❌ TikTok views stream error:",e),this.isConnected=!1,this.isConnecting=!1,this.handleReconnection()}}catch(e){console.error("❌ Error connecting to TikTok views stream:",e),this.isConnecting=!1,this.handleReconnection()}}}handleReconnection(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached for TikTok views stream");return}this.reconnectAttempts++;let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log("\uD83D\uDD04 Reconnecting to TikTok views stream in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,")")),setTimeout(()=>{this.isConnected||this.isConnecting||this.connect()},e)}disconnect(){this.eventSource&&(console.log("\uD83D\uDD0C Disconnecting from TikTok views stream..."),this.eventSource.close(),this.eventSource=null,this.isConnected=!1,this.isConnecting=!1)}subscribe(e){return this.callbacks.add(e),this.isConnected||this.isConnecting||this.connect(),()=>{this.callbacks.delete(e),0===this.callbacks.size&&this.disconnect()}}getIsConnected(){return this.isConnected}getConnectionStatus(){return{isConnected:this.isConnected,isConnecting:this.isConnecting,reconnectAttempts:this.reconnectAttempts}}constructor(){this.eventSource=null,this.callbacks=new Set,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.isConnecting=!1,this.isConnected=!1,this.setupReconnection()}}let c=new o;function d(){let[e,t]=(0,n.useState)(null),[s,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),[h,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{o(!0)},[]);let p=(0,n.useCallback)(async()=>{try{m(!0);let e=await fetch("/api/dashboard/total-tiktok-views?timeRange=24h");if(e.ok){let t=await e.json();return x(new Date().toLocaleTimeString()),t.totalViews}}catch(e){console.error("Error fetching total TikTok views:",e)}finally{m(!1)}return 0},[]),g=(0,n.useCallback)(async()=>{let[e,t]=await Promise.all([fetch("/api/dashboard/trending-coins?limit=50"),p()]);e.ok&&j((await e.json()).coins,t)},[p]),v=(0,n.useCallback)(async()=>{console.log("\uD83D\uDD04 Manually refreshing TikTok views..."),m(!0);try{let s=await p();e&&t(e=>e?{...e,totalViews24h:s}:null),x(new Date().toLocaleTimeString())}catch(e){console.error("❌ Error refreshing TikTok views:",e)}finally{m(!1)}},[p,e]);(0,n.useCallback)(()=>{console.log("\uD83D\uDD04 Manually reconnecting TikTok views service..."),c.disconnect(),c.connect("24h")},[]),(0,n.useEffect)(()=>{if(!s)return;g();let e=c.subscribe(e=>{console.log("\uD83D\uDD04 Real-time TikTok views update received:",e),t(t=>t?(x(new Date().toLocaleTimeString()),{...t,totalViews24h:e.totalViews}):null),m(!1)});if(l.gy){let t=l.gy.subscribe("trending_update",e=>{g()});return()=>{t(),e()}}return()=>{e()}},[s,g]),(0,n.useEffect)(()=>{if(!s)return;let e=()=>{f(c.getConnectionStatus())};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[s]),(0,n.useEffect)(()=>{s&&null===h&&f({isConnected:!1,isConnecting:!1,reconnectAttempts:0})},[s,h]),(0,n.useEffect)(()=>{if(s&&h&&h.reconnectAttempts>=5){console.warn("⚠️ Real-time service failed to connect after multiple attempts");let s=setInterval(()=>{p().then(s=>{e&&t(e=>e?{...e,totalViews24h:s}:null)})},3e4);return()=>clearInterval(s)}},[s,h,e,p]);let j=(e,s)=>{if(!e.length){t({totalCoins:0,totalViews24h:0,topPerformer:{symbol:"N/A",correlation:0,volume:0},volumeLeader:{symbol:"N/A",volume:0,views:0},socialLeader:{symbol:"N/A",views:0,mentions:0},marketCapLeader:{symbol:"N/A",marketCap:0,supply:0}});return}let a=e.reduce((e,t)=>t.correlation_score>e.correlation_score?t:e),n=e.reduce((e,t)=>t.trading_volume_24h>e.trading_volume_24h?t:e),r=e.reduce((e,t)=>t.tiktok_views_24h>e.tiktok_views_24h?t:e);t({totalCoins:e.length,totalViews24h:s,topPerformer:{symbol:a.symbol,correlation:a.correlation_score,volume:a.trading_volume_24h},volumeLeader:{symbol:n.symbol,volume:n.trading_volume_24h,views:n.tiktok_views_24h},socialLeader:{symbol:r.symbol,views:r.tiktok_views_24h,mentions:r.total_mentions},marketCapLeader:e.reduce((e,t)=>(t.market_cap||0)>(e.market_cap||0)?t:e,{symbol:"N/A",marketCap:0,supply:0})})},N=e=>null==e||isNaN(e)?"$0.00":e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(2),"K"):"$".concat(e.toFixed(2)),b=e=>null==e||isNaN(e)?"0":e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString(),w=e=>null==e||isNaN(e)?"0.0%":"".concat((100*e).toFixed(1),"%"),y=e=>null==e||isNaN(e)?"text-gray-500":e>=.8?"text-green-600":e>=.6?"text-yellow-600":e>=.4?"text-orange-600":"text-red-600";return s?e?e.totalCoins&&e.topPerformer&&e.volumeLeader&&e.socialLeader&&e.marketCapLeader?0===e.totalCoins&&0===e.totalViews24h&&"N/A"===e.topPerformer.symbol&&"N/A"===e.volumeLeader.symbol&&"N/A"===e.socialLeader.symbol?(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"p-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-muted/20 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Trending Data Available"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:"No trending coins data is currently available. This could be because:"}),(0,a.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1 text-left max-w-md mx-auto",children:[(0,a.jsx)("li",{children:"• The database is not populated with token data"}),(0,a.jsx)("li",{children:"• Price data collection is not running"}),(0,a.jsx)("li",{children:"• TikTok scraper is not collecting data"}),(0,a.jsx)("li",{children:"• No recent activity in the last 24 hours"})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Check your scrapers and data collection services to start seeing trending coins data."})})]})})}):h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[(null==e?void 0:e.totalCoins)&&e.totalCoins>0&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{className:"pb-2",children:(0,a.jsx)(r.ll,{className:"text-sm font-medium text-muted-foreground",children:"Total Coins Analyzed"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalCoins}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Active tokens in last 24h"})]})]}),(null==e?void 0:e.totalViews24h)&&e.totalViews24h>0&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{className:"pb-2",children:(0,a.jsxs)(r.ll,{className:"text-sm font-medium text-muted-foreground",children:["Total TikTok Views",(0,a.jsx)("div",{className:"flex items-center gap-2 mt-1",children:h?h.isConnected?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-green-600",children:"Live"})]}):h.isConnecting?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-yellow-600",children:"Connecting..."})]}):h.reconnectAttempts>=5?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,a.jsx)("span",{className:"text-xs text-orange-600",children:"Fallback Mode"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,a.jsx)("span",{className:"text-xs text-red-600",children:"Offline"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Initializing..."})]})})]})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d?(0,a.jsx)("span",{className:"animate-pulse",children:"..."}):b(e.totalViews24h)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Combined social reach",u&&(0,a.jsxs)("span",{className:"block text-xs text-blue-500",children:["Updated: ",u]}),(null==h?void 0:h.reconnectAttempts)&&h.reconnectAttempts>0&&(0,a.jsxs)("span",{className:"block text-xs text-orange-500",children:["Reconnect attempts: ",h.reconnectAttempts]}),(null==h?void 0:h.reconnectAttempts)&&h.reconnectAttempts>=5&&(0,a.jsx)("span",{className:"block text-xs text-orange-600",children:"Using fallback polling mode"}),(0,a.jsx)("button",{onClick:v,className:"block text-xs text-blue-600 hover:text-blue-800 underline mt-1",disabled:d,children:d?"Refreshing...":"Refresh manually"})]})]})]})]}),(()=>{var t;let s=e.topPerformer&&e.topPerformer.symbol&&"N/A"!==e.topPerformer.symbol&&e.topPerformer.correlation>0,n=e.volumeLeader&&e.volumeLeader.symbol&&"N/A"!==e.volumeLeader.symbol&&e.volumeLeader.volume>0,l=e.socialLeader&&e.socialLeader.symbol&&"N/A"!==e.socialLeader.symbol&&e.socialLeader.views>0,o=e.marketCapLeader&&"N/A"!==e.marketCapLeader.symbol&&e.marketCapLeader.marketCap>0;return s||n||l||o?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[s&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{className:"pb-2",children:(0,a.jsx)(r.ll,{className:"text-sm font-medium text-muted-foreground",children:"\uD83C\uDFC6 Top Performer"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:e.topPerformer.symbol}),(0,a.jsxs)("div",{className:"text-sm ".concat(y(e.topPerformer.correlation)),children:[w(e.topPerformer.correlation)," correlation"]})]}),(0,a.jsx)(i.C,{variant:"default",className:"text-xs",children:"Best Correlation"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Volume: ",N(e.topPerformer.volume)]})]})]}),n&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{className:"pb-2",children:(0,a.jsx)(r.ll,{className:"text-sm font-medium text-muted-foreground",children:"\uD83D\uDCB0 Volume Leader"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:e.volumeLeader.symbol}),(0,a.jsx)("div",{className:"text-sm text-green-600",children:N(e.volumeLeader.volume)})]}),(0,a.jsx)(i.C,{variant:"secondary",className:"text-xs",children:"Highest Volume"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Views: ",b(e.volumeLeader.views)]})]})]}),l&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{className:"pb-2",children:(0,a.jsx)(r.ll,{className:"text-sm font-medium text-muted-foreground",children:"\uD83D\uDCF1 Social Leader"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:e.socialLeader.symbol}),(0,a.jsxs)("div",{className:"text-sm text-blue-600",children:[b(e.socialLeader.views)," views"]})]}),(0,a.jsx)(i.C,{variant:"outline",className:"text-xs",children:"Most Viral"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Mentions: ",e.socialLeader.mentions]})]})]}),o&&(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{className:"pb-2",children:(0,a.jsx)(r.ll,{className:"text-sm font-medium text-muted-foreground",children:"\uD83D\uDCCA Market Cap Leader"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:e.marketCapLeader.symbol}),(0,a.jsx)("div",{className:"text-sm text-purple-600",children:N(e.marketCapLeader.marketCap)})]}),(0,a.jsx)(i.C,{variant:"destructive",className:"text-xs",children:"Highest Value"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Supply: ",(null===(t=e.marketCapLeader.supply)||void 0===t?void 0:t.toLocaleString())||"0"]})]})]})]}):null})()]}):(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"p-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Initializing real-time service..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})}):(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"p-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Preparing dashboard data..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Loading trending coins and market data..."})]})})}):(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"p-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading summary metrics..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}):(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Initializing..."})})})}},42347:function(e,t,s){s.d(t,{C:function(){return l}});var a=s(37821);s(58078);var n=s(898),r=s(48908);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:s}),t),...n})}},67469:function(e,t,s){s.d(t,{z:function(){return c}});var a=s(37821),n=s(58078),r=s(97035),i=s(898),l=s(48908);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:c=!1,...d}=e,m=c?r.g7:"button";return(0,a.jsx)(m,{className:(0,l.cn)(o({variant:n,size:i,className:s})),ref:t,...d})});c.displayName="Button"},87769:function(e,t,s){s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=s(37821),n=s(58078),r=s(48908);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},27002:function(e,t,s){s.d(t,{I:function(){return i}});var a=s(37821),n=s(58078),r=s(48908);let i=n.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},91027:function(e,t,s){s.d(t,{Bw:function(){return f},Ph:function(){return d},Ql:function(){return p},i4:function(){return u},ki:function(){return m}});var a=s(37821),n=s(58078),r=s(93517),i=s(94713),l=s(48134),o=s(48149),c=s(48908);let d=r.fC;r.ZA;let m=r.B4,u=n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsxs)(r.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[n,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let f=n.forwardRef((e,t)=>{let{className:s,children:n,position:i="popper",...l}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(h,{})]})})});f.displayName=r.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=r.__.displayName;let p=n.forwardRef((e,t)=>{let{className:s,children:n,...i}=e;return(0,a.jsxs)(r.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:n})]})});p.displayName=r.ck.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=r.Z0.displayName},96937:function(e,t,s){s.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var a=s(37821),n=s(58078),r=s(96159),i=s(48908);let l=r.fC,o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n})});o.displayName=r.aV.displayName;let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...n})});c.displayName=r.xz.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});d.displayName=r.VY.displayName},74129:function(e,t,s){s.d(t,{gy:function(){return r}});class a{initializeEventSource(){if(!this.isInitialized)try{this.eventSource=new EventSource("/api/real-time/events"),this.eventSource.onmessage=e=>{try{let t=JSON.parse(e.data);this.notifyListeners(t.type,t.payload)}catch(e){console.error("Error parsing real-time event:",e)}},this.eventSource.onerror=e=>{console.error("EventSource error:",e),setTimeout(()=>this.initializeEventSource(),5e3)},this.eventSource.onopen=()=>{console.log("Real-time connection established"),this.isInitialized=!0}}catch(e){console.error("Failed to initialize EventSource:",e)}}subscribe(e,t){return this.isInitialized||this.isReconnecting||this.initializeEventSource(),this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{let s=this.listeners.get(e);s&&(s.delete(t),0===s.size&&this.listeners.delete(e))}}notifyListeners(e,t){let s=this.listeners.get(e);s&&s.forEach(e=>{try{e(t)}catch(e){console.error("Error in real-time callback:",e)}})}disconnect(){if(this.eventSource){try{this.eventSource.close()}catch(e){console.error("Error closing EventSource:",e)}this.eventSource=null,this.isInitialized=!1,this.isReconnecting=!1}}isConnected(){return this.isInitialized&&null!==this.eventSource}constructor(){this.eventSource=null,this.listeners=new Map,this.isInitialized=!1,this.isReconnecting=!1,this.initializeEventSource()}}let n=null,r=n=new a},48908:function(e,t,s){s.d(t,{EV:function(){return m},Xn:function(){return i},__:function(){return o},cn:function(){return r},iM:function(){return c},o0:function(){return d},pi:function(){return l}});var a=s(52605),n=s(31638);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}function i(e){return"".concat(e.slice(0,6),"...").concat(e.slice(-4))}function l(e){let t=new Date,s=new Date(e),a=t.getTime()-s.getTime(),n={seconds:Math.floor(a/1e3),minutes:Math.floor(a/6e4),hours:Math.floor(a/36e5),days:Math.floor(a/864e5),months:Math.floor(a/2592e6),years:Math.floor(a/31536e6)};return n.years>0?"".concat(n.years,"y ago"):n.months>0?"".concat(n.months,"mo ago"):n.days>0?"".concat(n.days,"d ago"):n.hours>0?"".concat(n.hours,"h ago"):n.minutes>0?"".concat(n.minutes,"m ago"):n.seconds>0?"".concat(n.seconds,"s ago"):"Just now"}function o(e){if(e<1e3)return e.toString();let t=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,t)).toFixed(2)).toString()+[""," K"," M"," B"][t]}let c=(e,t,s,a,n)=>{if(!e||!Array.isArray(e)||0===e.length)return console.warn("processTradeData: trades parameter is undefined, null, or empty array"),[];let r=Date.now()-({"30m":18e5,"1h":36e5,"3h":108e5,"24h":864e5,"7d":6048e5})[n],i=e.filter(e=>new Date(e.trade_at).getTime()>=r).sort((e,t)=>new Date(e.trade_at).getTime()-new Date(t.trade_at).getTime());if(0===i.length)return console.warn("processTradeData: No trades found within the specified timeframe"),[];let l=i.map((e,r)=>{let l=new Date(e.trade_at);return{timestamp:u(e.trade_at,n),rawTimestamp:l.getTime(),price:e.price_usd,popularity:function(e,t,s,a,n,r){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.7,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.3,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1e-5,c=r-t,d=(s-e)/(a-t),m=(e+d*c)*i+Math.min(n/1e7,1)*l;return m*=1/(1+o*c),d>0&&(m*=1+Math.min(100*d,.5)),Math.max(m,.01)}(t,new Date(i[0].trade_at).getTime(),s,new Date(i[i.length-1].trade_at).getTime(),a,l.getTime())}});return console.log("RETURN DATA"),console.log(l),l},d=e=>new Date(e).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"});function m(e){if(0===e)return"0.000";let t=Math.abs(e),s=Number(t.toFixed(Math.max(0,3-Math.floor(Math.log10(t)))));return(e<0?-s:s).toString()}let u=(e,t)=>{let s=new Date(e);switch(t){case"30m":case"1h":case"3h":return"".concat(s.getHours(),":").concat(String(s.getMinutes()).padStart(2,"0"));case"24h":return"".concat(String(s.getHours()).padStart(2,"0"),":00");case"7d":return s.toLocaleDateString("en-US",{weekday:"short"});default:return e}}}}]);